# C++ 内存管理

C++中内存分5个区，堆，栈，自由存储区，全局/静态存储区和常量存储区

<https://blog.csdn.net/caogenwangbaoqiang/article/details/79788368>

* 栈

  函数内局部变量存储在栈上，函数结束自动释放。

* 堆

  使用malloc分配的内存块，需要使用free释放。

* 自由存储区

  使用new分配的内存快，需要使用delete释放。

* 全局/静态存储区

  全局变量，静态变量存放区域。

* 常量存储区

  存放常量，不允许修改。



## 堆和栈的区别

* 管理方式

  栈由编译器自动管理，无需程序员手动管理；堆需要程序员控制释放。

* 空间大小

  堆的大小几乎没有限制，32为系统堆内存可以达到$2^{32}$​（4GB）; 栈很小如1MB.

* 碎片问题

  堆会产生碎片，频繁的申请和释放。栈不会，因为栈是先进后出队列。

* 生长方向

  堆向上生长，向内存地址增加方向。栈向下生长，向内存地址减少方向。

* 分配方式

  堆动态分配；栈编译时分配。

* 分配效率

  栈由系统控制，效率高；堆效率低。



# const

* 常量成员可以使用初始化列表或类内初始化

  ```c++
  class A
  {
      private:
          const int a;
      public:
          A():a(0){};
          A(int x):a(x){};
      int getValue();
      int getValue() const: //常量成员函数，不得修改类中任何数据成员
  }；
  ```

  



